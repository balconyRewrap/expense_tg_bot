

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Handler &mdash; Expense TG Bot  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="States" href="handlers.statistics_menu.month_statistics.states.html" />
    <link rel="prev" title="Constants" href="handlers.statistics_menu.month_statistics.constants.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">TG Bot</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../database/index.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../services/index.html">Services</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Handlers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../add_expense/index.html">Add Expense Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basic/index.html">Basic Handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../registration/index.html">Registration Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../settings_menu/index.html">Settings Menu Handlers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Statistics Menu Handlers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../custom_statistics/index.html">Custom Statistics</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Month Statistics</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="handlers.statistics_menu.month_statistics.constants.html">Constants</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">Handler</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#handlers.statistics_menu.month_statistics.handler.handle_category"><code class="docutils literal notranslate"><span class="pre">handle_category()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#handlers.statistics_menu.month_statistics.handler.handle_end_category_select"><code class="docutils literal notranslate"><span class="pre">handle_end_category_select()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#handlers.statistics_menu.month_statistics.handler.month_statistcs_handler"><code class="docutils literal notranslate"><span class="pre">month_statistcs_handler()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#handlers.statistics_menu.month_statistics.handler.next_page_category_expenses_button_handler"><code class="docutils literal notranslate"><span class="pre">next_page_category_expenses_button_handler()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#handlers.statistics_menu.month_statistics.handler.next_page_choose_category_button_handler"><code class="docutils literal notranslate"><span class="pre">next_page_choose_category_button_handler()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#handlers.statistics_menu.month_statistics.handler.prev_page_category_expenses_button_handler"><code class="docutils literal notranslate"><span class="pre">prev_page_category_expenses_button_handler()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#handlers.statistics_menu.month_statistics.handler.prev_page_choose_category_button_handler"><code class="docutils literal notranslate"><span class="pre">prev_page_choose_category_button_handler()</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="handlers.statistics_menu.month_statistics.states.html">States</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../statistics_menu_handler.html">Statistics Menu Handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../handlers.statistics_menu.statistics_utils.html">Statistics Utilities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../modules.html">Modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules.html">Modules</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Expense TG Bot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">TG Bot</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Handlers</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Statistics Menu Handlers</a></li>
          <li class="breadcrumb-item"><a href="index.html">Month Statistics</a></li>
      <li class="breadcrumb-item active">Handler</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/pages/handlers/statistics_menu/month_statistics/handlers.statistics_menu.month_statistics.handler.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-handlers.statistics_menu.month_statistics.handler">
<span id="handler"></span><h1>Handler<a class="headerlink" href="#module-handlers.statistics_menu.month_statistics.handler" title="Link to this heading"></a></h1>
<p>Handler for month statistics menu in the bot.</p>
<dl class="py function">
<dt class="sig sig-object py" id="handlers.statistics_menu.month_statistics.handler.handle_category">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">handlers.statistics_menu.month_statistics.handler.</span></span><span class="sig-name descname"><span class="pre">handle_category</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CallbackQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FSMContext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i18n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">I18nContext</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#handlers.statistics_menu.month_statistics.handler.handle_category" title="Link to this definition"></a></dt>
<dd><p>Handle the selection of a category in the statistics menu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback_query</strong> (<em>types.CallbackQuery</em>) – The callback query object containing data about the user’s interaction.</p></li>
<li><p><strong>state</strong> (<em>FSMContext</em>) – The finite state machine context for managing user state.</p></li>
<li><p><strong>i18n</strong> (<em>I18nContext</em>) – The internationalization context for retrieving localized strings.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.statistics_menu.month_statistics.handler.handle_end_category_select">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">handlers.statistics_menu.month_statistics.handler.</span></span><span class="sig-name descname"><span class="pre">handle_end_category_select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CallbackQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FSMContext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i18n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">I18nContext</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#handlers.statistics_menu.month_statistics.handler.handle_end_category_select" title="Link to this definition"></a></dt>
<dd><p>Handle the end of category selection in the month statistics menu.</p>
<p>This function processes the callback query when a user selects a category
in the month statistics menu. It validates the callback query, ensures
the user’s information is present, and transitions the state to the
statistics menu. If an error occurs, it handles the situation gracefully
by notifying the user and ensuring a safe exit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback_query</strong> (<em>types.CallbackQuery</em>) – The callback query object
containing information about the user’s interaction.</p></li>
<li><p><strong>state</strong> (<em>FSMContext</em>) – The finite state machine context for managing
user states.</p></li>
<li><p><strong>i18n</strong> (<em>I18nContext</em>) – The internationalization context for retrieving
localized messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.statistics_menu.month_statistics.handler.month_statistcs_handler">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">handlers.statistics_menu.month_statistics.handler.</span></span><span class="sig-name descname"><span class="pre">month_statistcs_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FSMContext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i18n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">I18nContext</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#handlers.statistics_menu.month_statistics.handler.month_statistcs_handler" title="Link to this definition"></a></dt>
<dd><p>Handle the month statistics menu interaction for the user.</p>
<p>This function is triggered when a user accesses the month statistics menu.
It validates the user’s information, sets the appropriate state for selecting
categories, and sends a message prompting the user to choose expense categories
for month statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>types.Message</em>) – The incoming Telegram message object.</p></li>
<li><p><strong>state</strong> (<em>FSMContext</em>) – The finite state machine context for managing user states.</p></li>
<li><p><strong>i18n</strong> (<em>I18nContext</em>) – The internationalization context for retrieving localized strings.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.statistics_menu.month_statistics.handler.next_page_category_expenses_button_handler">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">handlers.statistics_menu.month_statistics.handler.</span></span><span class="sig-name descname"><span class="pre">next_page_category_expenses_button_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CallbackQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FSMContext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i18n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">I18nContext</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#handlers.statistics_menu.month_statistics.handler.next_page_category_expenses_button_handler" title="Link to this definition"></a></dt>
<dd><p>Handle the navigation to the next page of category expenses in a statistics menu.</p>
<p>This function is triggered when the user interacts with a button to navigate to the next page
of category expenses. It updates the current page in the state, retrieves the statistics pages,
and updates the message text with the content of the new page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback_query</strong> (<em>types.CallbackQuery</em>) – The callback query object containing information
about the user’s interaction with the inline button.</p></li>
<li><p><strong>state</strong> (<em>FSMContext</em>) – The finite state machine context for storing and retrieving user-specific
data during the bot’s operation.</p></li>
<li><p><strong>i18n</strong> (<em>I18nContext</em>) – The internationalization context for retrieving localized strings.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.statistics_menu.month_statistics.handler.next_page_choose_category_button_handler">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">handlers.statistics_menu.month_statistics.handler.</span></span><span class="sig-name descname"><span class="pre">next_page_choose_category_button_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CallbackQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FSMContext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i18n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">I18nContext</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#handlers.statistics_menu.month_statistics.handler.next_page_choose_category_button_handler" title="Link to this definition"></a></dt>
<dd><p>Handle the “next page” button press in the category selection menu.</p>
<p>This function updates the current page index for the category selection menu
in the user’s state. If the user is already on the last page, it resets the
page index to the first page. Otherwise, it increments the page index by one.
After updating the state, it calls a helper function to handle the updated
category list display.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback_query</strong> (<em>types.CallbackQuery</em>) – The callback query object containing
information about the button press event.</p></li>
<li><p><strong>state</strong> (<em>FSMContext</em>) – The finite state machine context for managing user-specific
state data.</p></li>
<li><p><strong>i18n</strong> (<em>I18nContext</em>) – The internationalization context for handling localized
messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.statistics_menu.month_statistics.handler.prev_page_category_expenses_button_handler">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">handlers.statistics_menu.month_statistics.handler.</span></span><span class="sig-name descname"><span class="pre">prev_page_category_expenses_button_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CallbackQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FSMContext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i18n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">I18nContext</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#handlers.statistics_menu.month_statistics.handler.prev_page_category_expenses_button_handler" title="Link to this definition"></a></dt>
<dd><p>Handle the “previous page” button for navigating category expenses statistics.</p>
<p>This function is triggered when the user interacts with the “previous page” button
in the category expenses statistics menu. It updates the current page in the state
and displays the corresponding statistics page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback_query</strong> (<em>types.CallbackQuery</em>) – The callback query object containing information
about the user’s interaction with the button.</p></li>
<li><p><strong>state</strong> (<em>FSMContext</em>) – The finite state machine context for managing user-specific data.</p></li>
<li><p><strong>i18n</strong> (<em>I18nContext</em>) – The internationalization context for retrieving localized strings.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.statistics_menu.month_statistics.handler.prev_page_choose_category_button_handler">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">handlers.statistics_menu.month_statistics.handler.</span></span><span class="sig-name descname"><span class="pre">prev_page_choose_category_button_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CallbackQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FSMContext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i18n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">I18nContext</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#handlers.statistics_menu.month_statistics.handler.prev_page_choose_category_button_handler" title="Link to this definition"></a></dt>
<dd><p>Handle the “previous page” button press in the category selection menu.</p>
<p>This function updates the current page in the state to the previous page
or wraps around to the last page if the current page is the first one.
It then calls a helper function to update the category list display.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback_query</strong> (<em>types.CallbackQuery</em>) – The callback query object containing
information about the button press event.</p></li>
<li><p><strong>state</strong> (<em>FSMContext</em>) – The finite state machine context for managing user state.</p></li>
<li><p><strong>i18n</strong> (<em>I18nContext</em>) – The internationalization context for handling translations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="handlers.statistics_menu.month_statistics.constants.html" class="btn btn-neutral float-left" title="Constants" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="handlers.statistics_menu.month_statistics.states.html" class="btn btn-neutral float-right" title="States" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, balconyRewrap.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>